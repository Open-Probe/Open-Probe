(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7099:function(e,t,s){Promise.resolve().then(s.bind(s,5693))},5693:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var a=s(3827),r=s(4090),n=s(8670),l=s(3348),i=s(2169);let c=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});c.displayName="Input";var o=s(575),d=s(9945);class m{connect(){return new Promise((e,t)=>{var s;if((null===(s=this.socket)||void 0===s?void 0:s.readyState)===WebSocket.OPEN){e(this.socket);return}try{this.socket=new WebSocket("".concat("ws://localhost:8000","/ws")),this.socket.onopen=()=>{console.log("WebSocket connected"),this.reconnectAttempts=0,e(this.socket)},this.socket.onerror=e=>{console.error("WebSocket connection error:",e),t(e)},this.socket.onclose=e=>{console.log("WebSocket disconnected:",e.code,e.reason),this.handleReconnection()},this.socket.onmessage=e=>{if(this.messageCallback)try{let t=JSON.parse(e.data);this.messageCallback(t)}catch(e){console.error("Error parsing WebSocket message:",e)}},setTimeout(()=>{var e;(null===(e=this.socket)||void 0===e?void 0:e.readyState)!==WebSocket.OPEN&&t(Error("WebSocket connection timeout"))},5e3)}catch(e){t(e)}})}handleReconnection(){this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,console.log("Attempting to reconnect... (".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),setTimeout(()=>{this.connect().catch(console.error)},this.reconnectDelay*this.reconnectAttempts)):console.error("Max reconnection attempts reached")}onMessage(e){this.messageCallback=e}disconnect(){this.socket&&(this.socket.close(),this.socket=null)}isConnected(){var e;return(null===(e=this.socket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}constructor(){this.socket=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.messageCallback=null}}let u=new m,x=()=>{let{setConnected:e,updateStep:t,setFinalAnswer:s,setError:a,clearSearch:n,cancelSearch:l}=(0,d.R)(),i=(0,r.useCallback)(e=>{switch(console.log("WebSocket message received:",e),e.type){case"step_update":t({id:e.data.step_id,type:e.data.step_type,status:"started"===e.data.status?"running":"completed"===e.data.status?"completed":"failed"===e.data.status?"failed":"pending",title:e.data.title,content:e.data.content||"",timestamp:new Date(e.timestamp),metadata:e.data.metadata});break;case"search_complete":s(e.data.result);break;case"search_cancelled":l(),console.log("Search was cancelled:",e.data.message);break;case"error":a(e.data.error);break;case"session_reset":n();break;default:console.warn("Unknown WebSocket message type:",e.type)}},[t,s,a,n,l]),c=(0,r.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{await u.connect(),e(!0),a(null),u.onMessage(i),console.log("WebSocket connected successfully")}catch(s){console.error("Failed to connect to WebSocket:",s),e(!1),t&&a("Failed to connect to server. Please refresh the page.")}},[e,a,i]),o=(0,r.useCallback)(()=>{u.disconnect(),e(!1)},[e]),m=(0,r.useCallback)(async()=>{u.isConnected()||await c(!0)},[c]);return(0,r.useEffect)(()=>(c(!1),()=>{o()}),[c,o]),{isConnected:u.isConnected(),connect:c,disconnect:o,ensureConnection:m}};class h{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseURL).concat(e),a={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(s,a);if(!e.ok){let t=await e.json();throw Error(t.detail||"HTTP ".concat(e.status))}return await e.json()}catch(t){throw console.error("API request failed: ".concat(e),t),t}}async startSearch(e){return this.request("/api/v1/search",{method:"POST",body:JSON.stringify({query:e})})}async getSearchStatus(e){return this.request("/api/v1/search/".concat(e,"/status"))}async cancelSearch(e){return this.request("/api/v1/search/".concat(e,"/cancel"),{method:"POST"})}async newChat(){return this.request("/api/v1/new-chat",{method:"POST"})}async health(){return this.request("/api/health")}constructor(e="http://localhost:8000"){this.baseURL=e}}let p=new h;function f(e){let{className:t,initialQuery:s}=e,[m,u]=(0,r.useState)(s||""),{startSearch:h,isInChatMode:f}=(0,d.R)(),{isConnected:g,ensureConnection:b}=x(),[v,j]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{s&&u(s)},[s]),f)return null;let y=async e=>{if(e.preventDefault(),m.trim()&&!v){j(!0);try{await b(),h(m.trim()),await p.startSearch(m.trim()),u("")}catch(e){console.error("Failed to start search:",e)}finally{j(!1)}}};return(0,a.jsxs)("div",{className:(0,i.cn)("w-full",t),children:[(0,a.jsx)("form",{onSubmit:y,className:"relative",children:(0,a.jsxs)("div",{className:"relative flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(n.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-muted-foreground h-5 w-5"}),(0,a.jsx)(c,{value:m,onChange:e=>u(e.target.value),placeholder:"Ask me anything...",className:"pl-12 pr-4 h-14 text-lg border-2 focus:border-primary transition-colors rounded-xl shadow-sm",disabled:v,autoFocus:!0})]}),(0,a.jsx)(o.z,{type:"submit",disabled:!m.trim()||v,size:"lg",className:"h-14 px-6 rounded-xl shadow-sm",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"h-5 w-5 mr-2 animate-spin"}),"Starting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 mr-2"}),"Search"]})})]})}),!g&&(0,a.jsx)("div",{className:"mt-3 text-center",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-yellow-50 border border-yellow-200 rounded-full text-yellow-700 text-xs",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-yellow-400 rounded-full animate-pulse"}),"Connecting..."]})})]})}var g=s(1213),b=s(6509),v=s(9259),j=s(3416),y=s(8994),N=s(1472),w=s(5159),k=s(3441);let S=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});S.displayName="Card";let C=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...r})});C.displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let T=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...r})});T.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";var D=s(247);let R=D.fC,A=D.wy,O=D.Fw;function z(e){var t,s;let{steps:n,isThinking:l,query:c,className:d}=e,[m,u]=(0,r.useState)(!1),[x,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(l||n.length>0)&&x&&u(!0)},[l,n.length,x]);let p=n.filter(e=>"pending"!==e.status);p.filter(e=>"running"===e.status);let f=p.filter(e=>"completed"===e.status);p.filter(e=>"failed"===e.status);let g=n.find(e=>"plan"===e.type);return(null==g||null===(s=g.metadata)||void 0===s||null===(t=s.planSteps)||void 0===t||t.length,n.filter(e=>"plan"!==e.type).filter(e=>"completed"===e.status).length,l||0!==n.length)?(0,a.jsx)(S,{className:(0,i.cn)("w-full max-w-4xl mx-auto mb-3",d),children:(0,a.jsxs)(R,{open:m,onOpenChange:()=>{u(!m),h(!1)},children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsx)(C,{className:"cursor-pointer hover:bg-muted/50 transition-colors py-3 px-4",children:(0,a.jsxs)(o.z,{variant:"ghost",className:"w-full justify-between p-0 h-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/10",children:l?(0,a.jsx)(y.Z,{className:"h-4 w-4 text-primary animate-spin"}):(0,a.jsx)(N.Z,{className:"h-4 w-4 text-primary"})}),(0,a.jsx)("div",{className:"text-left",children:(0,a.jsxs)("h3",{className:"font-medium text-sm",children:[l?(0,a.jsx)("span",{className:"thinking-dots",children:"Thinking"}):"Thinking Process",!l&&f.length>0&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",f.length," steps)"]})]})})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:m?(0,a.jsx)(w.Z,{className:"h-4 w-4 text-muted-foreground"}):(0,a.jsx)(k.Z,{className:"h-4 w-4 text-muted-foreground"})})]})})}),(0,a.jsx)(O,{children:(0,a.jsx)(T,{className:"pt-0 pb-3 px-4",children:p.length>0?(0,a.jsx)("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:(0,a.jsx)("div",{className:"space-y-2",children:p.map((e,t)=>(0,a.jsxs)("details",{className:"text-xs group",children:[(0,a.jsxs)("summary",{className:(0,i.cn)("flex items-center gap-2 p-2 rounded-md cursor-pointer hover:bg-muted/50 transition-colors","running"===e.status&&"bg-primary/10","completed"===e.status&&"bg-green-50 hover:bg-green-100","failed"===e.status&&"bg-red-50 hover:bg-red-100"),children:[(0,a.jsx)("div",{className:(0,i.cn)("w-2 h-2 rounded-full flex-shrink-0","running"===e.status&&"bg-primary animate-pulse","completed"===e.status&&"bg-green-500","failed"===e.status&&"bg-red-500","pending"===e.status&&"bg-gray-300")}),(0,a.jsx)("span",{className:"font-medium truncate flex-1",children:e.title}),"running"===e.status&&(0,a.jsx)(y.Z,{className:"h-3 w-3 animate-spin flex-shrink-0"}),(0,a.jsx)(k.Z,{className:"h-3 w-3 text-muted-foreground group-open:rotate-180 transition-transform flex-shrink-0"})]}),(0,a.jsxs)("div",{className:"mt-2 ml-4 p-3 bg-muted/30 rounded-md",children:[e.content&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Output:"}),(0,a.jsx)("div",{className:"text-xs bg-background/50 rounded p-2 max-h-32 overflow-y-auto custom-scrollbar",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap font-mono",children:e.content})})]}),e.metadata&&(0,a.jsxs)("div",{className:"space-y-2",children:[e.metadata.searchQuery&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Search Query:"}),(0,a.jsx)("p",{className:"text-xs bg-blue-50 rounded p-1",children:e.metadata.searchQuery})]}),e.metadata.codeResult&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Code Result:"}),(0,a.jsx)("pre",{className:"text-xs bg-green-50 rounded p-2 overflow-x-auto font-mono",children:e.metadata.codeResult})]}),e.metadata.planSteps&&e.metadata.planSteps.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Plan Steps:"}),(0,a.jsx)("ol",{className:"text-xs bg-yellow-50 rounded p-2 space-y-1",children:e.metadata.planSteps.map((e,t)=>(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsxs)("span",{className:"font-medium",children:[t+1,"."]}),(0,a.jsx)("span",{children:e})]},t))})]}),e.metadata.error&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-red-600",children:"Error:"}),(0,a.jsx)("p",{className:"text-xs bg-red-50 text-red-700 rounded p-2",children:e.metadata.error})]}),e.metadata.sources&&e.metadata.sources.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Sources:"}),(0,a.jsx)("div",{className:"text-xs bg-purple-50 rounded p-2 space-y-1 max-h-24 overflow-y-auto",children:e.metadata.sources.map((e,t)=>(0,a.jsx)("div",{children:"string"==typeof e?(0,a.jsx)("span",{className:"text-purple-700",children:e}):(0,a.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:underline block",children:e.title})},t))})]})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:e.timestamp.toLocaleTimeString()})]})]},e.id))})}):(0,a.jsxs)("div",{className:"text-center py-4 text-muted-foreground",children:[(0,a.jsx)(N.Z,{className:"h-6 w-6 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-xs",children:"Initializing..."})]})})})]})}):null}let P=e=>{let t=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return(t=t.replace(/\*(.*?)\*/g,"<em>$1</em>")).replace(/`([^`]+)`/g,'<code class="bg-muted px-1 py-0.5 rounded text-sm">$1</code>')};function E(e){let{message:t}=e,[s,n]=(0,r.useState)(!1),l="user"===t.type,i="assistant"===t.type,c=t.searchResult,d=async e=>{try{await navigator.clipboard.writeText(e),n(!0),setTimeout(()=>n(!1),2e3)}catch(e){console.error("Failed to copy to clipboard:",e)}},m=e=>new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit"}).format(e);if(l)return(0,a.jsxs)("div",{className:"flex items-start gap-3 max-w-[80%] ml-auto message-bubble user-message",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"bg-primary text-primary-foreground rounded-2xl rounded-tr-md px-4 py-3 shadow-sm",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap break-words",children:t.content})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 text-right",children:m(t.timestamp)})]}),(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-primary-foreground"})})]});if(i){let e=(null==c?void 0:c.status)==="thinking",r=(null==c?void 0:c.status)==="completed",n=null==c?void 0:c.finalAnswer,l=c&&c.steps.length>0;return(0,a.jsxs)("div",{className:"flex items-start gap-3 max-w-[95%] message-bubble assistant-message",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-muted rounded-full flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"bg-muted/50 rounded-2xl rounded-tl-md px-4 py-3 shadow-sm",children:[l&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(z,{steps:c.steps,isThinking:e,query:c.query,className:"border border-border/20 shadow-sm bg-muted/20 rounded-lg"})}),r&&n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:(0,a.jsx)("div",{className:"whitespace-pre-wrap break-words text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:P(n)}})})}),c&&(0,a.jsxs)("div",{className:"space-y-3 pt-2 border-t border-border/30",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["✅ Completed in ",c.endTime?Math.round((c.endTime.getTime()-c.startTime.getTime())/1e3):"?","s"]}),(0,a.jsxs)("span",{children:["\uD83D\uDD04 ",c.steps.filter(e=>"completed"===e.status).length," steps"]}),(0,a.jsxs)("span",{children:["\uD83D\uDD52 ",m(c.endTime||c.startTime)]})]}),(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>d(n),className:"h-7 px-2 text-xs",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),"Copied!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),"Copy"]})})]}),c.steps.some(e=>{var t;return null===(t=e.metadata)||void 0===t?void 0:t.sources})&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("details",{className:"group",children:[(0,a.jsxs)("summary",{className:"cursor-pointer text-xs font-medium text-muted-foreground hover:text-foreground mb-2",children:["\uD83D\uDCDA Sources Used (",c.steps.map(e=>{var t;return(null===(t=e.metadata)||void 0===t?void 0:t.sources)||[]}).flat().filter(Boolean).length," sources)"]}),(0,a.jsx)("div",{className:"space-y-2 ml-4 max-h-40 overflow-y-auto custom-scrollbar",children:c.steps.map(e=>{var t;return(null===(t=e.metadata)||void 0===t?void 0:t.sources)||[]}).flat().filter(Boolean).map((e,t)=>(0,a.jsx)("div",{className:"text-xs bg-muted/30 rounded p-2",children:"string"==typeof e?(0,a.jsx)("span",{className:"text-blue-600",children:e}):(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline font-medium",children:e.title}),e.snippet&&(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:e.snippet})]})},t))})]})})]})]}),(()=>{var t,s;if(!e||n)return null;let r=c.steps.find(e=>"plan"===e.type),l=(null==r?void 0:null===(s=r.metadata)||void 0===s?void 0:null===(t=s.planSteps)||void 0===t?void 0:t.length)||0;if(0===l){let e=c.steps.find(e=>"running"===e.status),t=(null==e?void 0:e.title)||"Planning...";return(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted/20 rounded-lg border border-border/30",children:[(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:t})]})}let i=c.steps.filter(e=>"plan"!==e.type).filter(e=>"completed"===e.status).length,o=c.steps.find(e=>"running"===e.status);return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/20 rounded-lg border border-border/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[i," of ",l," Done"]})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground max-w-xs truncate",children:(null==o?void 0:o.title)||"Processing..."})]})})()]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[m(t.timestamp),r&&(null==c?void 0:c.endTime)&&(0,a.jsxs)("span",{className:"ml-2",children:["• ",Math.round((c.endTime.getTime()-c.startTime.getTime())/1e3),"s"]})]})]})]})}return null}var I=s(9209),Z=s(9990);function F(e){let{disabled:t=!1}=e,[s,n]=(0,r.useState)(""),{startSearch:l,cancelSearch:i,currentSearch:m}=(0,d.R)(),{ensureConnection:u}=x(),[h,f]=(0,r.useState)(!1),g=(null==m?void 0:m.status)==="thinking",b=async e=>{if(e.preventDefault(),s.trim()&&!t&&!g){f(!0);try{await u(),l(s.trim()),await p.startSearch(s.trim()),n("")}catch(e){console.error("Failed to start search:",e)}finally{f(!1)}}},v=async()=>{if(m&&g)try{await p.cancelSearch(m.id),i()}catch(e){console.error("Failed to cancel search:",e),i()}};return(0,a.jsx)("form",{onSubmit:b,className:"relative w-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)("div",{className:"relative flex-1 min-w-0",children:(0,a.jsx)(c,{value:s,onChange:e=>n(e.target.value),placeholder:"Ask me anything...",className:"w-full h-12 pr-4 text-base border-2 focus:border-primary transition-colors rounded-xl resize-none",disabled:t||h,autoFocus:!0,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b(e))}})}),g?(0,a.jsx)(o.z,{type:"button",variant:"destructive",size:"sm",onClick:v,className:"h-12 px-4 rounded-xl flex-shrink-0",title:"Stop generation",children:(0,a.jsx)(I.Z,{className:"h-4 w-4"})}):(0,a.jsx)(o.z,{type:"submit",disabled:!s.trim()||t||h,size:"sm",className:"h-12 px-4 rounded-xl flex-shrink-0",children:(0,a.jsx)(Z.Z,{className:"h-4 w-4"})})]})})}var W=s(3879);function M(e){let{onBackToHome:t}=e,{messages:s,currentSearch:n,exitChatMode:i}=(0,d.R)(),c=(0,r.useRef)(null),m=(0,r.useRef)(null),u=(0,r.useRef)(!0),x=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!c.current||!m.current)return;let t=m.current,s=t.scrollHeight-t.scrollTop-t.clientHeight<100;u.current&&(s||e)&&setTimeout(()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})},100)},[]);(0,r.useEffect)(()=>{x()},[s,x]),(0,r.useEffect)(()=>{(null==n?void 0:n.status)==="completed"&&x(!0)},[null==n?void 0:n.status,x]);let h=(0,r.useCallback)(()=>{if(!m.current)return;let e=m.current,t=e.scrollHeight-e.scrollTop-e.clientHeight<50;u.current=t},[]),p=(null==n?void 0:n.status)==="thinking";return(0,a.jsxs)("div",{className:"flex flex-col h-screen w-full",children:[(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center justify-between chat-header p-4 border-b border-border/50 bg-background/95 backdrop-blur-sm z-10",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 max-w-4xl mx-auto w-full",children:[(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:t,className:"p-2 h-auto",children:(0,a.jsx)(W.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"font-semibold text-lg",children:"OpenProbe Chat"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"AI-powered research assistant"})]}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>{i(),t()},disabled:p,className:"flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),"New Chat"]})]})}),(0,a.jsx)("div",{ref:m,className:"flex-1 overflow-y-auto custom-scrollbar min-h-0 chat-messages-container",onScroll:h,children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6 message-spacing p-4 pb-32 chat-messages-container",children:[s.map(e=>(0,a.jsx)(E,{message:e},e.id)),(0,a.jsx)("div",{ref:c})]})})}),(0,a.jsx)("div",{className:"flex-shrink-0 border-t border-border/50 bg-background/95 backdrop-blur-sm chat-input-container",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto chat-input p-4",children:[(0,a.jsx)(F,{disabled:p}),(0,a.jsx)("div",{className:"text-center mt-3",children:(0,a.jsxs)("p",{className:"text-xs text-muted-foreground/60",children:["Powered by"," ",(0,a.jsx)("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"OpenProbe AI"})," ","• Built with Next.js & FastAPI"]})})]})})]})}function _(){let{isConnected:e}=x(),{isInChatMode:t,exitChatMode:s}=(0,d.R)(),[n,l]=(0,r.useState)(!1),[c,o]=(0,r.useState)(""),m=e=>{o(e)};return((0,r.useEffect)(()=>{t&&(l(!0),setTimeout(()=>l(!1),300))},[t]),t)?(0,a.jsx)("div",{className:(0,i.cn)("fixed inset-0 bg-background transition-all duration-300 ease-out",n?"scale-95 opacity-0":"scale-100 opacity-100"),children:(0,a.jsx)(M,{onBackToHome:()=>{l(!0),o(""),setTimeout(()=>{s(),l(!1)},300)}})}):(0,a.jsxs)("div",{className:(0,i.cn)("flex-1 flex flex-col transition-all duration-300 ease-out",n?"scale-95 opacity-0":"scale-100 opacity-100"),children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col justify-center items-center px-4 py-8 min-h-[calc(100vh-8rem)]",children:[(0,a.jsxs)("div",{className:"text-center mb-12 max-w-3xl",children:[(0,a.jsx)("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"OpenProbe"}),(0,a.jsx)("p",{className:"text-xl md:text-2xl text-muted-foreground mb-2",children:"AI-powered research assistant"}),(0,a.jsx)("p",{className:"text-base text-muted-foreground/80",children:"Ask complex questions and watch me think through the answer step by step"})]}),(0,a.jsx)("div",{className:"w-full max-w-2xl",children:(0,a.jsx)(f,{initialQuery:c})}),(0,a.jsxs)("div",{className:"mt-12 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Try asking:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 justify-center max-w-2xl",children:["What is the population of the largest city in the country where the 2024 Olympics were held?","If I multiply the number of moons of Jupiter by the year the Berlin Wall fell, what do I get?","What was the profession of the spouse of the author who wrote 'Do Androids Dream of Electric Sheep?'"].map((e,t)=>(0,a.jsxs)("button",{onClick:()=>m(e),className:"text-xs bg-muted/50 hover:bg-muted transition-colors px-3 py-2 rounded-full text-muted-foreground hover:text-foreground cursor-pointer",children:['"',e.length>60?e.substring(0,60)+"...":e,'"']},t))})]}),!e&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-50 border border-yellow-200 rounded-full text-yellow-700 text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),"Connecting to server..."]})})]}),(0,a.jsxs)("div",{className:"fixed inset-0 -z-10 pointer-events-none overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/30 via-white to-purple-50/30"}),(0,a.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-100/20 rounded-full blur-3xl animate-pulse"}),(0,a.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-100/20 rounded-full blur-3xl animate-pulse"})]})]})}},575:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var a=s(3827),r=s(4090),n=s(9143),l=s(9769),i=s(2169);let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:o=!1,...d}=e,m=o?n.g7:"button";return(0,a.jsx)(m,{className:(0,i.cn)(c({variant:r,size:l,className:s})),ref:t,...d})});o.displayName="Button"},9945:function(e,t,s){"use strict";s.d(t,{R:function(){return n}});var a=s(2020),r=s(2169);let n=(0,a.Ue)((e,t)=>({messages:[],currentSearch:null,isInChatMode:!1,isConnected:!1,error:null,startSearch:s=>{let a={id:(0,r.Ox)(),query:s,status:"thinking",steps:[],startTime:new Date},n={id:(0,r.Ox)(),type:"user",content:s,timestamp:new Date},l={id:(0,r.Ox)(),type:"assistant",content:"",timestamp:new Date,searchResult:a};e({currentSearch:a,messages:[...t().messages,n,l],isInChatMode:!0,error:null})},clearSearch:()=>{e({currentSearch:null,error:null})},cancelSearch:()=>{let{currentSearch:s}=t();s&&"thinking"===s.status&&e({currentSearch:{...s,status:"idle",endTime:new Date},error:null})},updateStep:s=>{let{currentSearch:a,messages:r}=t();if(!a)return;let n={...a,steps:a.steps.some(e=>e.id===s.id)?a.steps.map(e=>e.id===s.id?s:e):[...a.steps,s]},l=r.map(e=>{var t;return"assistant"===e.type&&(null===(t=e.searchResult)||void 0===t?void 0:t.id)===a.id?{...e,searchResult:n}:e});e({currentSearch:n,messages:l})},setFinalAnswer:s=>{let{currentSearch:a,messages:r}=t();if(!a)return;let n={...a,status:"completed",finalAnswer:s,endTime:new Date},l=r.map(e=>{var t;return"assistant"===e.type&&(null===(t=e.searchResult)||void 0===t?void 0:t.id)===a.id?{...e,content:s,searchResult:n}:e});e({currentSearch:n,messages:l})},setError:s=>{let{currentSearch:a}=t();e({error:s,currentSearch:a?{...a,status:"error",error:s||void 0,endTime:new Date}:null})},setConnected:t=>{e({isConnected:t})},addMessage:s=>{let a={...s,id:(0,r.Ox)(),timestamp:new Date};e({messages:[...t().messages,a]})},clearMessages:()=>{e({messages:[],currentSearch:null,isInChatMode:!1,error:null})},enterChatMode:()=>{e({isInChatMode:!0})},exitChatMode:()=>{e({isInChatMode:!1,messages:[],currentSearch:null,error:null})}}))},2169:function(e,t,s){"use strict";s.d(t,{Ox:function(){return l},cn:function(){return n}});var a=s(3167),r=s(1367);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}function l(){return Math.random().toString(36).substr(2,9)}}},function(e){e.O(0,[523,640,971,69,744],function(){return e(e.s=7099)}),_N_E=e.O()}]);